import{r as o,u as g,a as A,j as e,B as E,b as u,T as t,c as L,I as F,d as R}from"./index-YmGoZUYa.js";import{B as S}from"./index-WIjwjuCo.js";import{u as U,I as p,a as k,V as w,L as B,S as C}from"./useSnackbar-DylmPX32.js";import{B as O}from"./index-WILF1oBe.js";import{V as T}from"./Visibility-XuZCLFOf.js";import"./createSvgIcon-f1R841q-.js";import"./requirePropFactory-4mIbly52.js";import"./unsupportedProp-P-rZrHSD.js";import"./Paper-ftKanG2k.js";const W=()=>{const[a,f]=o.useState({email:"",password:""}),[r,x]=o.useState(!1),m=g(),{data:n,error:i,loading:b,executeFetch:N}=A(),{setSession:c}=R(),{isOpen:v,handleClose:D,handleOpen:d}=U(),[j,y]=o.useState(""),[h,I]=o.useState("success");o.useEffect(()=>{n&&n.code===200?(c(n.data.token,n.data.expiration),m("/inicio")):i&&(y(i.message||"Ocurrió un error durante el inicio de sesión."),I("error"),d())},[n,i,m,d,c]);const l=s=>{f({...a,[s.target.name]:s.target.value})},P=()=>{x(!r)},V=async s=>{s.preventDefault(),N({endPoint:"auth/login",method:"POST",data:a})};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(E,{open:b},void 0,!1,{fileName:"/Users/ricardo/Documents/Reto Innova/App-Puyango/src/content/pages/Login/Form/index.jsx",lineNumber:50,columnNumber:9},void 0),e.jsxDEV(u,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:4,borderRadius:1,maxWidth:400,margin:"auto"},children:[e.jsxDEV(t,{variant:"h2",component:"h1",gutterBottom:!0,children:"Iniciar sesión"},void 0,!1,{fileName:"/Users/ricardo/Documents/Reto Innova/App-Puyango/src/content/pages/Login/Form/index.jsx",lineNumber:63,columnNumber:13},void 0),e.jsxDEV(t,{variant:"subtitle1",gutterBottom:!0,children:"Agrega tu información a continuación"},void 0,!1,{fileName:"/Users/ricardo/Documents/Reto Innova/App-Puyango/src/content/pages/Login/Form/index.jsx",lineNumber:66,columnNumber:13},void 0),e.jsxDEV(u,{component:"form",onSubmit:V,sx:{width:"100%",mt:1},children:[e.jsxDEV(p,{label:"Correo electrónico",type:"email",value:a.email,onChange:l,name:"email",margin:"normal",fullWidth:!0},void 0,!1,{fileName:"/Users/ricardo/Documents/Reto Innova/App-Puyango/src/content/pages/Login/Form/index.jsx",lineNumber:74,columnNumber:17},void 0),e.jsxDEV(p,{label:"Contraseña",type:r?"text":"password",value:a.password,onChange:l,name:"password",margin:"normal",fullWidth:!0,endAdornment:e.jsxDEV(k,{position:"end",children:e.jsxDEV(L,{title:r?"Ocultar Contraseña":"Mostrar contraseña",arrow:!0,children:e.jsxDEV(F,{"aria-label":"toggle password visibility",onClick:P,children:r?e.jsxDEV(w,{color:"primary"},void 0,!1,{fileName:"/Users/ricardo/Documents/Reto Innova/App-Puyango/src/content/pages/Login/Form/index.jsx",lineNumber:98,columnNumber:49},void 0):e.jsxDEV(T,{color:"primary"},void 0,!1,{fileName:"/Users/ricardo/Documents/Reto Innova/App-Puyango/src/content/pages/Login/Form/index.jsx",lineNumber:98,columnNumber:85},void 0)},void 0,!1,{fileName:"/Users/ricardo/Documents/Reto Innova/App-Puyango/src/content/pages/Login/Form/index.jsx",lineNumber:94,columnNumber:29},void 0)},void 0,!1,{fileName:"/Users/ricardo/Documents/Reto Innova/App-Puyango/src/content/pages/Login/Form/index.jsx",lineNumber:93,columnNumber:29},void 0)},void 0,!1,{fileName:"/Users/ricardo/Documents/Reto Innova/App-Puyango/src/content/pages/Login/Form/index.jsx",lineNumber:92,columnNumber:25},void 0)},void 0,!1,{fileName:"/Users/ricardo/Documents/Reto Innova/App-Puyango/src/content/pages/Login/Form/index.jsx",lineNumber:83,columnNumber:17},void 0),e.jsxDEV(O,{text:"Siguiente",type:"submit",color:"primary",variant:"contained",sx:{mt:3,mb:2,py:1},fullWidth:!0},void 0,!1,{fileName:"/Users/ricardo/Documents/Reto Innova/App-Puyango/src/content/pages/Login/Form/index.jsx",lineNumber:104,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/ricardo/Documents/Reto Innova/App-Puyango/src/content/pages/Login/Form/index.jsx",lineNumber:69,columnNumber:13},void 0),e.jsxDEV(t,{variant:"body2",children:["Si ya tienes una cuenta ",e.jsxDEV(B,{href:"/register",variant:"body2",children:"Ingresa aquí"},void 0,!1,{fileName:"/Users/ricardo/Documents/Reto Innova/App-Puyango/src/content/pages/Login/Form/index.jsx",lineNumber:115,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/ricardo/Documents/Reto Innova/App-Puyango/src/content/pages/Login/Form/index.jsx",lineNumber:113,columnNumber:13},void 0),e.jsxDEV(C,{isOpen:v,duration:6e3,handleClose:D,type:h,text:j},void 0,!1,{fileName:"/Users/ricardo/Documents/Reto Innova/App-Puyango/src/content/pages/Login/Form/index.jsx",lineNumber:119,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/ricardo/Documents/Reto Innova/App-Puyango/src/content/pages/Login/Form/index.jsx",lineNumber:51,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/ricardo/Documents/Reto Innova/App-Puyango/src/content/pages/Login/Form/index.jsx",lineNumber:49,columnNumber:9},void 0)},Y=()=>(g(),e.jsxDEV(u,{sx:{display:"flex",height:"100vh"},children:[e.jsxDEV(S,{backgroundImage:"/img/background.png"},void 0,!1,{fileName:"/Users/ricardo/Documents/Reto Innova/App-Puyango/src/content/pages/Login/index.jsx",lineNumber:16,columnNumber:13},void 0),e.jsxDEV(W,{},void 0,!1,{fileName:"/Users/ricardo/Documents/Reto Innova/App-Puyango/src/content/pages/Login/index.jsx",lineNumber:17,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/ricardo/Documents/Reto Innova/App-Puyango/src/content/pages/Login/index.jsx",lineNumber:15,columnNumber:9},void 0));export{Y as default};
